# ğŸš€ Redis Lab â€” Java + Spring Boot (6 MÃ³dulos Independentes)

Este projeto Ã© um **laboratÃ³rio completo de estudos com Redis**, usando **Java 17 e Spring Boot 3**, cobrindo **6 mÃ³dulos independentes**:

1. Key-Value + TTL
2. Cache com `@Cacheable`
3. Rate Limiting
4. Pub/Sub
5. Redis Streams (Fila + Consumer Group)
6. Distributed Lock (Redlock)

A proposta Ã© oferecer **implementaÃ§Ãµes prÃ¡ticas, isoladas e de fÃ¡cil consulta**, permitindo estudar cada funcionalidade do Redis de forma clara e organizada.

---

# âš™ï¸ Tecnologias Utilizadas

- **Java 17**
- **Spring Boot 3.5**
- **Spring Data Redis**
- **Docker / Redis 7**
- **Lettuce Client**
- **Postman (Collections)**

---

# ğŸ“ Estrutura do Projeto

src/main/java/com.edsonlabs.redislab
â”œâ”€â”€ RedisLabApplication.java
â”œâ”€â”€ config
â”‚ â”œâ”€â”€ RedisConfig.java
â”‚ â””â”€â”€ RedisCacheConfig.java
â”‚
â”œâ”€â”€ module1_keyvalue
â”‚ â”œâ”€â”€ api/KeyValueController.java
â”‚ â”œâ”€â”€ dto/KeyValueRequest.java
â”‚ â””â”€â”€ service/KeyValueService.java
â”‚
â”œâ”€â”€ module2_cache
â”‚ â”œâ”€â”€ api/CacheController.java
â”‚ â””â”€â”€ service/SlowService.java
â”‚
â”œâ”€â”€ module3_ratelimit
â”‚ â”œâ”€â”€ api/RateLimitController.java
â”‚ â””â”€â”€ service/RateLimitService.java
â”‚
â”œâ”€â”€ module4_pubsub
â”‚ â”œâ”€â”€ config/RedisPubSubConfig.java
â”‚ â”œâ”€â”€ api/PubSubController.java
â”‚ â”œâ”€â”€ listener/MessageListener.java
â”‚ â””â”€â”€ publisher/MessagePublisher.java
â”‚
â”œâ”€â”€ module5_streams
â”‚ â”œâ”€â”€ api/StreamController.java
â”‚ â”œâ”€â”€ producer/StreamProducer.java
â”‚ â””â”€â”€ consumer/StreamConsumer.java
â”‚
â””â”€â”€ module6_lock
â”œâ”€â”€ api/LockController.java
â””â”€â”€ service/LockService.java

yaml
Copiar cÃ³digo

Cada mÃ³dulo Ã© **100% independente** e pode ser estudado separadamente.

---

# ğŸ³ Subindo o Redis com Docker

Arquivo `docker-compose.yml` incluÃ­do:

```yaml
version: '3.8'

services:
  redis:
    image: redis:7-alpine
    container_name: redis-lab
    ports:
      - "6379:6379"
    command: ["redis-server", "--appendonly", "yes"]
Subir:

bash
Copiar cÃ³digo
docker compose up -d
Testar:

bash
Copiar cÃ³digo
docker exec -it redis-lab redis-cli
PING
ğŸ”¥ MÃ³dulo 1 â€” Key-Value + TTL
Objetivo: GravaÃ§Ã£o simples de chaves, leitura, deleÃ§Ã£o e TTL.

Endpoint: criar chave
bash
Copiar cÃ³digo
POST /api/kv
{
  "key": "user:1:name",
  "value": "Edson",
  "ttlSeconds": 30
}
Buscar valor
pgsql
Copiar cÃ³digo
GET /api/kv/user:1:name
Ver TTL
ruby
Copiar cÃ³digo
GET /api/kv/user:1:name/ttl
Apagar
pgsql
Copiar cÃ³digo
DELETE /api/kv/user:1:name
ğŸ”¥ MÃ³dulo 2 â€” Cache com @Cacheable
Objetivo: Demonstrar melhora de performance usando Redis como cache distribuÃ­do.

Endpoint:

pgsql
Copiar cÃ³digo
GET /cache/expensive?input=java
Primeira chamada: ~3000ms

Chamadas seguintes: instantÃ¢neo (cacheado no Redis)

ğŸ”¥ MÃ³dulo 3 â€” Rate Limiting
EstratÃ©gia: mÃ¡ximo 5 requisiÃ§Ãµes por minuto por usuÃ¡rio.

Endpoint:

sql
Copiar cÃ³digo
GET /ratelimit/test?user=edson
AtÃ© 5 requisiÃ§Ãµes â†’ 200 OK

Na 6Âª requisiÃ§Ã£o â†’ 429 Too Many Requests

ğŸ”¥ MÃ³dulo 4 â€” Pub/Sub
Objetivo: PublicaÃ§Ã£o e consumo de eventos assÃ­ncronos.

Publicar mensagem:
bash
Copiar cÃ³digo
POST /pubsub/publish
Body raw/text: "Hello Pub/Sub!"
Listener (logs):
vbnet
Copiar cÃ³digo
ğŸ“¥ Mensagem recebida pelo listener: Hello Pub/Sub!
ğŸ”¥ MÃ³dulo 5 â€” Redis Streams (Fila + Consumer Group)
Redis Streams Ã© um mecanismo robusto similar ao Kafka.

Endpoint do Producer:

bash
Copiar cÃ³digo
POST /streams/send
Body: "Mensagem teste"
Consumer: roda automaticamente a cada 3s
Consumer Group: lab-group
Stream Name: lab-stream

Visualizar no Redis:

sql
Copiar cÃ³digo
XRANGE lab-stream - +
XINFO GROUPS lab-stream
ğŸ”¥ MÃ³dulo 6 â€” Distributed Lock (Redlock)
Evita execuÃ§Ã£o concorrente de tarefas crÃ­ticas.

Tentar executar:
pgsql
Copiar cÃ³digo
GET /lock/test
Resultados:

Se lock disponÃ­vel â†’ "Task executed with lock."

Se jÃ¡ existe lock â†’ 409 Lock already acquired

TTL configurado: 10 segundos.

ğŸ§ª Postman Collection
O projeto possui collections separadas para cada mÃ³dulo.

Importe em:

mathematica
Copiar cÃ³digo
File â†’ Import â†’ redis-lab.postman_collection.json
ğŸ“š Comandos Ãºteis no Redis CLI
Listar chaves:

nginx
Copiar cÃ³digo
KEYS *
TTL:

nginx
Copiar cÃ³digo
TTL chave
Streams:

sql
Copiar cÃ³digo
XRANGE lab-stream - +
XINFO STREAM lab-stream
XINFO GROUPS lab-stream
Pub/Sub:

nginx
Copiar cÃ³digo
SUBSCRIBE lab-pubsub-channel
ğŸ—ï¸ ExtensÃµes (para estudos futuros)
Rate limiting com janela deslizante (Sliding Window)

Circuit breaker com Redis

Workflow/event sourcing com Streams

RetenÃ§Ã£o e Replay de mensagens

Consumo distribuÃ­do com mÃºltiplos grupos

Leader Election com Redis Locking

ğŸ‘¨â€ğŸ’» Autor
LaboratÃ³rio desenvolvido por Edson Gomes do Rego
System Support Engineer â€¢ Java Developer â€¢ SRE â€¢ Cloud Infra â€¢ DevOps

â­ Se este projeto te ajudouâ€¦
Considere dar uma â˜… no GitHub!

Assim vocÃª terÃ¡ sempre fÃ¡cil acesso e ajuda o repositÃ³rio a crescer. ğŸ˜Š

```bash